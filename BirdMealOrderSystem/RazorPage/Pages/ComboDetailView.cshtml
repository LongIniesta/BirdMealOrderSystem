@page
@using BussinessObject;
@model RazorPage.Pages.ComboDetailViewModel
@{
    if (SessionHelper.checkPermission(HttpContext.Session, "customer"))
    {
        Layout = "LayoutCustomer";
    }
}
<h1>Details</h1>

<div>
    <h4>Combo</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Combo.ComboName)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Combo.ComboName)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Combo.Price)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Combo.Price)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Combo.Ratingavg)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Combo.Ratingavg)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Combo.Discount)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Combo.Discount)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Combo.ComboDescription)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Combo.ComboDescription)
        </dd>
        <dt class="col-sm-2">
            Price after discount
        </dt>
        <dd class="col-sm-10">
            @((double)Model.Combo.Price - ((double) Model.Combo.Price* Model.Combo.Discount/100))
        </dd>
    </dl>


    <h3>Combo details:</h3>
    <div>
        @foreach (var item in Model.ComboDetails)
        {
            <dl class="row">
                <dt class="col-sm-2">
                    <img src="~/uploads/@item.Product.ImageLink" width="120" height="100" />
                </dt>
                <dt class="col-sm-2">
                    @item.Product.ProductName
                </dt>
                <dd class="col-sm-10">
                    @item.Quantity
                </dd>
            </dl>
        }
    </div>
</div>
<div>
    <a asp-page="./ShoppingCombo">Back to List</a>
</div>
<div>
    @foreach (OrderComboDetail d in Model.orderComboDetails)
    {
        <h4>
            @d.Order.User.UserName
        </h4>
        <h5>
            @d.Feedback
        </h5>
        <h6>
            @d.Rating sao
        </h6>
        <br />
    }
</div>
